import { p as e, w as o } from "./utils-D3GAsA1N.js";
import { nextTick as t, defineComponent as a, ref as d, computed as n, openBlock as i, createElementBlock as l, renderSlot as s, createVNode as r, withCtx as p, createTextVNode as c, toDisplayString as u, createBlock as v, Teleport as w, withDirectives as m, normalizeClass as f, normalizeStyle as h, withModifiers as g, createElementVNode as k, vShow as b, createCommentVNode as y } from "vue";
import { u as x, a as P } from "./hooks-C1UjnUZ1.js";
import { _ as L } from "./button-y8Aj-aBT.js";
import { _ } from "./icon-DKepx2gf.js";
let E = null;
const C = () => {
  E && E.classList.add("nue-dropdown-pool--actived");
}, $ = () => {
  t(() => {
    E && (E.children.length || E.classList.remove("nue-dropdown-pool--actived"));
  });
}, B = ["data-visible"], N = ["data-direction"], z = o(a({ name: "NueDropdown", __name: "dropdown", props: { text: {}, hideOnClick: { type: Boolean, default: false }, disabled: { type: Boolean, default: false }, dropType: { default: "click" }, triggerText: {}, placement: { default: "bottom-start" }, size: {}, keepAlive: { type: Boolean, default: false }, hideOnClicked: { type: Boolean, default: false }, nesting: { type: Boolean, default: false }, beforeExecute: {}, afterExecute: {}, theme: {} }, emits: ["execute"], setup(o2, { expose: a2, emit: z2 }) {
  const j = o2, D = z2, O = d(false), T = d(), A = d(), { activePool: I, deactivePool: R } = (!!document.getElementById("NueDropdownPool") || (() => {
    const e2 = document.createElement("div");
    e2.classList.add("nue-dropdown-pool"), e2.id = "NueDropdownPool", document.body.appendChild(e2), E = e2;
  })(), { pool: E, activePool: C, deactivePool: $ }), { placement: W, rectInfo: q, calculatePosition: F } = x(T, A, { placement: j.placement }), { show: G, hide: H } = P(O), J = n(() => {
    const { theme: o3, size: t2 } = j, a3 = "nue-dropdown";
    let d2 = [a3];
    return o3 && (d2 = d2.concat(e(o3, a3))), t2 && d2.push(`${a3}--${t2}`), W.value && d2.push(`${a3}--${W.value}`), d2;
  }), K = n(() => {
    const { wrapperWidth: e2 } = q;
    return { "--dropdown-wrapper-width": `${e2}px` };
  }), M = n(() => {
    const e2 = W.value.split("-");
    return { direction: e2[0] || "top", alignment: e2[1] || "center" };
  }), Q = (e2) => {
    var _a;
    j.disabled || (e2 && ((_a = e2.stopPropagation) == null ? void 0 : _a.call(e2)), G(() => {
      j.nesting || O.value || document.body.click();
    }, () => {
      F(j.placement), I(), window.addEventListener("click", S), window.addEventListener("wheel", S);
    }));
  }, S = (e2) => {
    var _a;
    j.disabled || (e2 && ((_a = e2.stopPropagation) == null ? void 0 : _a.call(e2)), H(160, () => {
      A.value && A.value.classList.add("nue-dropdown--hiding");
    }, () => {
      R(), j.keepAlive && A.value && A.value.classList.remove("nue-dropdown--hiding"), window.removeEventListener("click", S), window.removeEventListener("wheel", S);
    }));
  }, U = (e2) => {
    var _a;
    e2 && ((_a = e2.stopPropagation) == null ? void 0 : _a.call(e2)), O.value ? S() : Q();
  }, V = (e2) => {
    U(e2);
  }, X = (e2) => {
    e2.stopPropagation();
    const o3 = e2.target.dataset.executeid;
    o3 && D("execute", o3), j.hideOnClicked || j.hideOnClick ? S() : t(() => {
      Q();
    });
  };
  return a2({ visible: n(() => O.value), show: Q, hide: S, toggle: U }), (e2, o3) => (i(), l("div", { ref_key: "dropdownWrapperRef", ref: T, "data-visible": O.value, class: "nue-dropdown-wrapper" }, [s(e2.$slots, "default", { clickTrigger: V, toggle: U }, () => [r(L, { disabled: e2.disabled, size: e2.size, onClick: V }, { append: p(() => [r(_, { class: "state-icon", name: "arrow-down" })]), default: p(() => [c(u(e2.triggerText || e2.text) + " ", 1)]), _: 1 }, 8, ["disabled", "size"])]), (i(), v(w, { to: "#NueDropdownPool" }, [e2.keepAlive || O.value ? m((i(), l("ul", { key: 0, ref_key: "dropdownRef", ref: A, class: f(J.value), "data-direction": M.value.direction, style: h(K.value), onClick: g(X, ["stop"]) }, [s(e2.$slots, "dropdown", {}, () => [o3[0] || (o3[0] = k("span", { class: "nue-dropdown__empty-text" }, " No options. ", -1))])], 14, N)), [[b, O.value]]) : y("", true)]))], 8, B));
} }));
export {
  z as N
};
